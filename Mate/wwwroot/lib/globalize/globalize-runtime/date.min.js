!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["../globalize-runtime","./number"],t):"object"==typeof exports?module.exports=t(require("../globalize-runtime"),require("./number")):t(e.Globalize)}(this,function(t){var a,r,p=t._createErrorUnsupportedFeature,n=t._looseMatching,v=t._regexpEscape,b=t._removeLiteralQuotes,s=t._runtimeKey,o=t._stringPad,i=t._validateParameterPresence,u=t._validateParameterType,c=t._validateParameterTypeString,l=function(e,t){u(e,t,void 0===e||e instanceof Date,"Date")},d=function(){function a(e,t,a){Object.defineProperty(e,t,{value:a})}function r(e,t){for(var a=0,r=e.getTime();a<t.length-1&&r>=t[a];)a++;return a}function n(e){var t=this.getTimezoneOffset(),a=e();this.original.setTime(new Date(this.getTime()));var r=this.getTimezoneOffset();return r-t&&this.original.setMinutes(this.original.getMinutes()+r-t),a}var s=function(e,t){if(a(this,"original",new Date(e.getTime())),a(this,"local",new Date(e.getTime())),a(this,"timeZoneData",t),a(this,"setWrap",n),!(t.untils&&t.offsets&&t.isdsts))throw new Error("Invalid IANA data");this.setTime(this.local.getTime()-60*this.getTimezoneOffset()*1e3)};return s.prototype.clone=function(){return new s(this.original,this.timeZoneData)},["getFullYear","getMonth","getDate","getDay","getHours","getMinutes","getSeconds","getMilliseconds"].forEach(function(e){var t="getUTC"+e.substr(3);s.prototype[e]=function(){return this.local[t]()}}),s.prototype.valueOf=s.prototype.getTime=function(){return this.local.getTime()+60*this.getTimezoneOffset()*1e3},s.prototype.getTimezoneOffset=function(){var e=r(this.original,this.timeZoneData.untils);return this.timeZoneData.offsets[e]},["setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds"].forEach(function(e){var a="setUTC"+e.substr(3);s.prototype[e]=function(e){var t=this.local;return this.setWrap(function(){return t[a](e)})}}),s.prototype.setTime=function(e){return this.local.setTime(e)},s.prototype.isDST=function(){var e=r(this.original,this.timeZoneData.untils);return Boolean(this.timeZoneData.isdsts[e])},s.prototype.inspect=function(){var e=r(this.original,this.timeZoneData.untils),t=this.timeZoneData.abbrs;return this.local.toISOString().replace(/Z$/,"")+" "+(t&&t[e]+" "||-1*this.getTimezoneOffset()+" ")+(this.isDST()?"(daylight savings)":"")},s.prototype.toDate=function(){return new Date(this.getTime())},["toISOString","toJSON","toUTCString"].forEach(function(e){s.prototype[e]=function(){return this.toDate()[e]()}}),s}(),m=function(e,t){return(e.getDay()-t+7)%7},y=function(e,t){switch(e=e instanceof d?e.clone():new Date(e.getTime()),t){case"year":e.setMonth(0);case"month":e.setDate(1);case"day":e.setHours(0);case"hour":e.setMinutes(0);case"minute":e.setSeconds(0);case"second":e.setMilliseconds(0)}return e},g=function(e){return Math.floor((t=y(e,"year"),(e.getTime()-t.getTime())/864e5));var t},h=(a={era:"G",year:"yY",quarter:"qQ",month:"ML",week:"wW",day:"dDF",weekday:"ecE",dayperiod:"a",hour:"hHkK",minute:"m",second:"sSA",zone:"zvVOxX"},r=(r=function(t,a,e){return e.split("").forEach(function(e){t[e]=a}),t})||function(e,t,a){return e[a]=t,e},Object.keys(a).reduce(function(e,t){return r(e,t,a[t])},{})),k=/([a-z])\1*|'([^']|'')+'|''|./gi,D=function(e,t,a,r){var n,s=e.getTimezoneOffset();return n=Math.abs(s),r=r||{1:function(e){return o(e,1)},2:function(e){return o(e,2)}},t.split(";")[0<s?1:0].replace(":",a).replace(/HH?/,function(e){return r[e.length](Math.floor(n/60))}).replace(/mm/,function(){return r[2](Math.floor(n%60))}).replace(/ss/,function(){return r[2](Math.floor(n%1*60))})},T=["sun","mon","tue","wed","thu","fri","sat"],f=function(i,u,c){var l=[],f=c.timeSeparator;return c.timeZoneData&&(i=new d(i,c.timeZoneData())),c.pattern.replace(k,function(e){var t,a,r,n,s=e.charAt(0),o=e.length;switch("j"===s&&(s=c.preferredTime),"Z"===s&&(o=o<4?(s="x",4):o<5?(s="O",4):(s="X",5)),"z"===s&&(i.isDST&&(r=i.isDST()?c.daylightTzName:c.standardTzName),r||(s="O",o<4&&(o=1))),s){case"G":r=c.eras[i.getFullYear()<0?0:1];break;case"y":r=i.getFullYear(),2===o&&(r=+(r=String(r)).substr(r.length-2));break;case"Y":(r=new Date(i.getTime())).setDate(r.getDate()+7-m(i,c.firstDay)-c.firstDay-c.minDays),r=r.getFullYear(),2===o&&(r=+(r=String(r)).substr(r.length-2));break;case"Q":case"q":r=Math.ceil((i.getMonth()+1)/3),2<o&&(r=c.quarters[s][o][r]);break;case"M":case"L":r=i.getMonth()+1,2<o&&(r=c.months[s][o][r]);break;case"w":r=m(y(i,"year"),c.firstDay),r=Math.ceil((g(i)+r)/7)-(7-r>=c.minDays?0:1);break;case"W":r=m(y(i,"month"),c.firstDay),r=Math.ceil((i.getDate()+r)/7)-(7-r>=c.minDays?0:1);break;case"d":r=i.getDate();break;case"D":r=g(i)+1;break;case"F":r=Math.floor(i.getDate()/7)+1;break;case"e":case"c":if(o<=2){r=m(i,c.firstDay)+1;break}case"E":r=T[i.getDay()],r=c.days[s][o][r];break;case"a":r=c.dayPeriods[i.getHours()<12?"am":"pm"];break;case"h":r=i.getHours()%12||12;break;case"H":r=i.getHours();break;case"K":r=i.getHours()%12;break;case"k":r=i.getHours()||24;break;case"m":r=i.getMinutes();break;case"s":r=i.getSeconds();break;case"S":r=Math.round(i.getMilliseconds()*Math.pow(10,o-3));break;case"A":r=Math.round(((n=i)-y(n,"day"))*Math.pow(10,o-3));break;case"z":break;case"v":if(c.genericTzName){r=c.genericTzName;break}case"V":if(c.timeZoneName){r=c.timeZoneName;break}"v"===e&&(o=1);case"O":r=0===i.getTimezoneOffset()?c.gmtZeroFormat:(t=o<4?(t=i.getTimezoneOffset(),c.hourFormat[t%60-t%1==0?0:1]):c.hourFormat,r=D(i,t,f,u),c.gmtFormat.replace(/\{0\}/,r));break;case"X":if(0===i.getTimezoneOffset()){r="Z";break}case"x":t=i.getTimezoneOffset(),1===o&&t%60-t%1!=0&&(o+=1),4!==o&&5!==o||t%1!=0||(o-=2),r=D(i,r=["+HH;-HH","+HHmm;-HHmm","+HH:mm;-HH:mm","+HHmmss;-HHmmss","+HH:mm:ss;-HH:mm:ss"][o-1],":");break;case":":r=f;break;case"'":r=b(e);break;default:r=e}"number"==typeof r&&(r=u[o](r)),"literal"===(a=h[s]||"literal")&&l.length&&"literal"===l[l.length-1].type?l[l.length-1].value+=r:l.push({type:a,value:r})}),l},M=function(e,t){var a,r,n,s=e.getDate();e.setDate(1),e.setMonth(t),a=e,r=s,n=new Date(a.getFullYear(),a.getMonth()+1,0).getDate(),a.setDate(r<1?1:r<n?r:n)},w=function(e,t,a){return e<t||a<e},H=function(e,t,n){var s,o,i,u,c,l,f,m,a,r,g=new Date,h=[];if(n.timeZoneData&&(g=new d(g,n.timeZoneData())),!t.length)return null;if(!t.every(function(e){var t,a,r;if("literal"===e.type)return!0;switch(t=e.type.charAt(0),r=e.type.length,"j"===t&&(t=n.preferredTimeData),t){case"G":h.push(0),c=+e.value;break;case"y":if(a=e.value,2===r){if(w(a,0,99))return!1;(a+=100*Math.floor(g.getFullYear()/100))>g.getFullYear()+20&&(a-=100)}g.setFullYear(a),h.push(0);break;case"Y":throw p({feature:"year pattern `"+t+"`"});case"Q":case"q":break;case"M":case"L":if(a=r<=2?e.value:+e.value,w(a,1,12))return!1;u=a,h.push(1);break;case"w":case"W":break;case"d":o=e.value,h.push(2);break;case"D":i=e.value,h.push(2);break;case"F":break;case"e":case"c":case"E":break;case"a":s=e.value;break;case"h":if(a=e.value,w(a,1,12))return!1;l=f=!0,g.setHours(12===a?0:a),h.push(3);break;case"K":if(a=e.value,w(a,0,11))return!1;l=f=!0,g.setHours(a),h.push(3);break;case"k":if(a=e.value,w(a,1,24))return!1;l=!0,g.setHours(24===a?0:a),h.push(3);break;case"H":if(a=e.value,w(a,0,23))return!1;l=!0,g.setHours(a),h.push(3);break;case"m":if(a=e.value,w(a,0,59))return!1;g.setMinutes(a),h.push(4);break;case"s":if(a=e.value,w(a,0,59))return!1;g.setSeconds(a),h.push(5);break;case"A":g.setHours(0),g.setMinutes(0),g.setSeconds(0);case"S":a=Math.round(e.value*Math.pow(10,3-r)),g.setMilliseconds(a),h.push(6);break;case"z":case"Z":case"O":case"v":case"V":case"X":case"x":"number"==typeof e.value&&(m=e.value)}return!0}))return null;if(l&&!(!s^f))return null;if(0===c&&g.setFullYear(-1*g.getFullYear()+1),void 0!==u&&M(g,u-1),void 0!==o){if(w(o,1,(r=g,new Date(r.getFullYear(),r.getMonth()+1,0).getDate())))return null;g.setDate(o)}else if(void 0!==i){if(w(i,1,(a=g.getFullYear(),1===new Date(a,1,29).getMonth()?366:365)))return null;g.setMonth(0),g.setDate(i)}return f&&"pm"===s&&g.setHours(g.getHours()+12),void 0!==m&&g.setMinutes(g.getMinutes()+m-g.getTimezoneOffset()),h=Math.max.apply(null,h),(g=y(g,["year","month","day","hour","minute","second","milliseconds"][h]))instanceof d&&(g=g.toDate()),g},F=function(f,m,g){var h,e,p=[],d=["abbreviated","wide","narrow"];return h=g.digitsRe,f=n(f),e=g.pattern.match(k).every(function(e){var t,a,r,n,s={};function o(e,t){var a,r,n=f.match(e);return t=t||function(e){return+e},!!n&&(r=n[1],n.length<6?(a=r?1:3,s.value=60*t(n[a])):n.length<10?(a=r?[1,3]:[5,7],s.value=60*t(n[a[0]])+t(n[a[1]])):(a=r?[1,3,5]:[7,9,11],s.value=60*t(n[a[0]])+t(n[a[1]])+t(n[a[2]])/60),r&&(s.value*=-1),!0)}function i(){if(1===a)return r=!0,n=h}function u(){if(1===a||2===a)return r=!0,n=new RegExp("^("+h.source+"){1,2}")}function c(){if(2===a)return r=!0,n=new RegExp("^("+h.source+"){2}")}function l(e){var t=g[e.join("/")];return t&&t.some(function(e){if(e[1].test(f))return s.value=e[0],n=e[1],!0}),null}switch(t=(s.type=e).charAt(0),a=e.length,"Z"===t&&(a=a<4?(t="x",4):a<5?(t="O",4):(t="X",5)),"z"===t&&g.standardOrDaylightTzName&&(s.value=null,n=g.standardOrDaylightTzName),"v"===t&&(g.genericTzName?(s.value=null,n=g.genericTzName):(t="V",a=4)),"V"===t&&g.timeZoneName&&(s.value=2===a?g.timeZoneName:null,n=g.timeZoneNameRe),t){case"G":l(["gregorian/eras",a<=3?"eraAbbr":4===a?"eraNames":"eraNarrow"]);break;case"y":case"Y":r=!0,n=1===a?new RegExp("^("+h.source+")+"):2===a?new RegExp("^("+h.source+"){1,2}"):new RegExp("^("+h.source+"){"+a+",}");break;case"Q":case"q":i()||c()||l(["gregorian/quarters","Q"===t?"format":"stand-alone",d[a-3]]);break;case"M":case"L":u()||l(["gregorian/months","M"===t?"format":"stand-alone",d[a-3]]);break;case"D":a<=3&&(r=!0,n=new RegExp("^("+h.source+"){"+a+",3}"));break;case"W":case"F":i();break;case"e":case"c":if(a<=2){i()||c();break}case"E":6===a?l(["gregorian/days",["c"===t?"stand-alone":"format"],"short"])||l(["gregorian/days",["c"===t?"stand-alone":"format"],"abbreviated"]):l(["gregorian/days",["c"===t?"stand-alone":"format"],d[a<3?0:a-3]]);break;case"a":l(["gregorian/dayPeriods/format/wide"]);break;case"w":(function(){if(1===a)return r=!0,n=new RegExp("^("+h.source+"){1,2}")})()||c();break;case"d":case"h":case"H":case"K":case"k":case"j":case"m":case"s":u();break;case"S":r=!0,n=new RegExp("^("+h.source+"){"+a+"}");break;case"A":r=!0,n=new RegExp("^("+h.source+"){"+(a+5)+"}");break;case"v":case"V":case"z":if(n&&n.test(f))break;if("V"===t&&2===a)break;case"O":if(f===g["timeZoneNames/gmtZeroFormat"])s.value=0,n=g["timeZoneNames/gmtZeroFormatRe"];else if(!g["timeZoneNames/hourFormat"].some(function(e){if(o(e,m))return n=e,!0}))return null;break;case"X":if("Z"===f){s.value=0,n=/^Z/;break}case"x":if(!g.x.some(function(e){if(o(e))return n=e,!0}))return null;break;case"'":s.type="literal",n=new RegExp("^"+v(b(e)));break;default:s.type="literal",n=new RegExp("^"+v(e))}return!!n&&(f=f.replace(n,function(e){return s.lexeme=e,r&&(s.value=m(e)),""}),!!s.lexeme&&((!r||!isNaN(s.value))&&(p.push(s),!0)))}),""!==f&&(e=!1),e?p:[]};function z(e){return void 0!==e.skeleton||void 0!==e.date||void 0!==e.time||void 0!==e.datetime||void 0!==e.raw}return t._dateFormat=f,t._dateFormatterFn=function(t){return function(e){return t(e).map(function(e){return e.value}).join("")}},t._dateParser=H,t._dateParserFn=function(a,r,n){return function(e){var t;return i(e,"value"),c(e,"value"),t=F(e,a,n),H(0,t,r)||null}},t._dateTokenizer=F,t._dateToPartsFormatterFn=function(t,a){return function(e){return i(e,"value"),l(e,"value"),f(e,t,a)}},t._validateParameterTypeDate=l,t.dateFormatter=t.prototype.dateFormatter=function(e){return z(e=e||{})||(e.skeleton="yMd"),t[s("dateFormatter",this._locale,[e])]},t.dateToPartsFormatter=t.prototype.dateToPartsFormatter=function(e){return z(e=e||{})||(e.skeleton="yMd"),t[s("dateToPartsFormatter",this._locale,[e])]},t.dateParser=t.prototype.dateParser=function(e){return z(e=e||{})||(e.skeleton="yMd"),t[s("dateParser",this._locale,[e])]},t.formatDate=t.prototype.formatDate=function(e,t){return i(e,"value"),l(e,"value"),this.dateFormatter(t)(e)},t.formatDateToParts=t.prototype.formatDateToParts=function(e,t){return i(e,"value"),l(e,"value"),this.dateToPartsFormatter(t)(e)},t.parseDate=t.prototype.parseDate=function(e,t){return i(e,"value"),c(e,"value"),this.dateParser(t)(e)},t});