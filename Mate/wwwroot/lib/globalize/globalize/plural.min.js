!function(r,n){"function"==typeof define&&define.amd?define(["cldr","../globalize","cldr/event","cldr/supplemental"],n):"object"==typeof exports?module.exports=n(require("cldrjs"),require("../globalize")):n(r.Cldr,r.Globalize)}(this,function(r,n){var s,c=n._runtimeBind,p=n._validateCldr,f=n._validateDefaultLocale,h=n._validateParameterPresence,d=n._validateParameterType,v=n._validateParameterTypePlainObject;s=function(){"use strict";var p=function(r){if(Array.isArray(r)){for(var n=0,e=Array(r.length);n<r.length;n++)e[n]=r[n];return e}return Array.from(r)},i=function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")},n=function(){function t(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(r,n,e){return n&&t(r.prototype,n),e&&t(r,e),r}}(),a=function(){function r(){i(this,r)}return n(r,[{key:"parse",value:function(r){var a=this;return"i = 0 or n = 1"===r?"n >= 0 && n <= 1":"i = 0,1"===r?"n >= 0 && n < 2":"i = 1 and v = 0"===r?(this.v0=1,"n == 1 && v0"):r.replace(/([tv]) (!?)= 0/g,function(r,n,e){var t=n+"0";return a[t]=1,e?"!"+t:t}).replace(/\b[fintv]\b/g,function(r){return a[r]=1,r}).replace(/([fin]) % (10+)/g,function(r,n,e){var t=n+e;return a[t]=1,t}).replace(/n10+ = 0/g,"t0 && $&").replace(/(\w+ (!?)= )([0-9.]+,[0-9.,]+)/g,function(r,n,e,t){return"n = 0,1"===r?"(n == 0 || n == 1)":e?n+t.split(",").join(" && "+n):"("+n+t.split(",").join(" || "+n)+")"}).replace(/(\w+) (!?)= ([0-9]+)\.\.([0-9]+)/g,function(r,n,e,t,i){return Number(t)+1===Number(i)?e?n+" != "+t+" && "+n+" != "+i:"("+n+" == "+t+" || "+n+" == "+i+")":e?"("+n+" < "+t+" || "+n+" > "+i+")":"n"===n?(a.t0=1,"(t0 && n >= "+t+" && n <= "+i+")"):"("+n+" >= "+t+" && "+n+" <= "+i+")"}).replace(/ and /g," && ").replace(/ or /g," || ").replace(/ = /g," == ")}},{key:"vars",value:function(r){function n(){return r.apply(this,arguments)}return n.toString=function(){return r.toString()},n}(function(){var r=[];for(var n in this.i&&r.push("i = s[0]"),(this.f||this.v)&&r.push("f = s[1] || ''"),this.t&&r.push("t = (s[1] || '').replace(/0+$/, '')"),this.v&&r.push("v = f.length"),this.v0&&r.push("v0 = !s[1]"),(this.t0||this.n10||this.n100)&&r.push("t0 = Number(s[0]) == n"),this)if(/^.10+$/.test(n)){var e="n"===n[0]?"t0 && s[0]":n[0];r.push(n+" = "+e+".slice(-"+n.substr(2).length+")")}return r.length?"var "+["s = String(n).split('.')"].concat(r).join(", "):""})}]),r}(),r=function(){function c(r){var n=void 0===arguments[1]?c:arguments[1],e=n.cardinals,t=n.ordinals;if(i(this,c),!e&&!t)throw new Error("At least one type of plural is required");return this.lc=r,this.categories={cardinal:[],ordinal:[]},this.parser=new a,this.fn=this.buildFunction(e,t),(this.fn._obj=this).fn.categories=this.categories,this.fn.toString=this.fnToString.bind(this),this.fn}return n(c,[{key:"compile",value:function(r,n){var e,t=[],i=c.rules[r][this.lc];if(!i){if(n)throw new Error('Locale "'+this.lc+'" '+r+" rules not found");return this.categories[r]=["other"],"'other'"}for(var a in i){var l=i[a].trim().split(/\s*@\w*/),o=(e=l,Array.isArray(e)?e:Array.from(e)),u=o[0],s=(o.slice(1),a.replace("pluralRule-count-",""));u&&t.push([this.parser.parse(u),s])}return this.categories[r]=t.map(function(r){return r[1]}).concat("other"),1===t.length?"("+t[0][0]+") ? '"+t[0][1]+"' : 'other'":[].concat(p(t.map(function(r){return"("+r[0]+") ? '"+r[1]+"'"})),["'other'"]).join("\n      : ")}},{key:"buildFunction",value:function(r,n){var e=this,t=function(r){return("  "+r+";").replace(/(.{1,78})(,|$) ?/g,"$1$2\n      ")},i=function(r){return("  "+r+";").replace(/(.{1,78}) (\|\| |$) ?/gm,"$1\n          $2")},a=[n&&["ordinal",!r],r&&["cardinal",!0]].map(function(r){return r?(r[1]?"return ":"if (ord) return ")+e.compile.apply(e,p(r)):""}).map(i),l=[t(this.parser.vars())].concat(p(a)).join("\n").replace(/\s+$/gm,"").replace(/^[\s;]*[\r\n]+/gm,"");return new Function(n&&r?"n, ord":"n",l)}},{key:"fnToString",value:function(r){return Function.prototype.toString.call(this.fn).replace(/^function( \w+)?/,r?"function "+r:"function").replace("\n/**/","")}}],[{key:"load",value:function(){for(var r=arguments.length,n=Array(r),e=0;e<r;e++)n[e]=arguments[e];return n.forEach(function(r){var n=r&&r.supplemental||null;if(!n)throw new Error("Data does not appear to be CLDR data");c.rules={cardinal:n["plurals-type-cardinal"]||c.rules.cardinal,ordinal:n["plurals-type-ordinal"]||c.rules.ordinal}}),c}}]),c}();return r.cardinals=!0,r.ordinals=!1,r.rules={cardinal:{},ordinal:{}},r}();var g=function(r,n){d(r,n,void 0===r||"number"==typeof r,"Number")};return n.plural=n.prototype.plural=function(r,n){return h(r,"value"),g(r,"value"),this.pluralGenerator(n)(r)},n.pluralGenerator=n.prototype.pluralGenerator=function(r){var n,e,t,i,a,l,o,u;return v(r,"options"),r=r||{},e=this.cldr,n=[r],l=r.type||"cardinal",o=r.type,d(o,"options.type",void 0===o||"cardinal"===o||"ordinal"===o,'String "cardinal" or "ordinal"'),f(e),t="ordinal"===l,e.on("get",p),e.supplemental(["plurals-type-"+l,"{language}"]),e.off("get",p),s.rules={},s.rules[l]=e.supplemental("plurals-type-"+l),i=new s(e.attributes.language,{ordinals:t,cardinals:!t}),c(n,e,a=function(r){return h(r,"value"),g(r,"value"),u(r)},[u=i]),a},n});